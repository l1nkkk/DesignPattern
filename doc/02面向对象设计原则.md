- [面向对象设计为了什么](#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E4%B8%BA%E4%BA%86%E4%BB%80%E4%B9%88)
- [重新认识面向对象](#%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1)
- [面向对象设计原则](#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99)
  - [依赖倒置原则(DIP)](#%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99DIP)
    - [例子解析](#%E4%BE%8B%E5%AD%90%E8%A7%A3%E6%9E%90)
# 面向对象设计为了什么
变化是复用的天敌！面向对象设计最大的优势在于：  
***抵御变化！***  
这里的低于变化不是说不用增加任何改变就可以适应变化，而是说要让变化的程度最小。
# 重新认识面向对象
**关键词：责任 **
在这里从宏观层面对面向对象进行更深认识；以前的封装，继承，多态是从底层思维理解。  
- 理解隔离变化  
• 从**宏观层**面来看，面向对象的构建方式更能适应软件的变化，能将变化所带来的影响减为最小
- 各司其职  
• 从**微观层**面来看，面向对象的方式更强调各个类的“责任”
• 由于需求变化导致的新增类型不应该影响原来类型的实现——是所谓各负其责  
**注：接口一样，但是实现不一样，各司其职，可以理解其实现的接口就是这个类的责任**
- 对象是什么？  
• 从语言实现层面来看，对象封装了代码和数据。
• 从规格层面讲，对象是一系列可被使用的公共接口。
• **从概念层面讲，对象是某种拥有责任的抽象**。
# 面向对象设计原则
- **设计原则比设计模式更重要**，因为现在有些设计模式已经不流行，或者被语言机制给替代了，或者有些已经忘记了；但有了设计原则就可以发明自己的模式，也可以去理解千千万万更多的模式，**不要把模式当成算法来学习**，这是不对的。所有的设计模式都是依赖设计原则推导出来的。  
- 两段代码非常像的，可能表达出来的是不同的设计模式。有点时候，两段代码相差很大，但是他们可能表达的是同一个模式。当一段代码我们只修改一点点的时候，就可能和原先所遵守的代码模式不一样了。  
- **学习设计模式不要只看代码的调用流程机制。看得懂并不意味自己可以掌握这样的设计模式。**
## 依赖倒置原则(DIP)
这是一个非常重要的原则，几乎贯穿所有的设计原则。
- 高层模块(稳定)不应该依赖于低层模块(变化)，二者都应该依赖于抽象(稳定) 。
- 抽象(稳定)不应该依赖于实现细节(变化) ，实现细节应该依赖于抽象(稳定)。  
### 例子解析
在上节的例子中，第一个例子的MainForm依赖Line和Rect类，Line和Rect类都是不稳定的，所以倒置MainForm也不稳定。也就是高层模块(MainForm)不应该依赖于低层模块(Line和Rect类)
![](../pic/WeChat&#32;Image_20191024145013.png)
提出抽象类进行隔离,依靠一个**抽象类shape**，把低层的类给隔离开来，实现**隔离变化**。  
抽象(稳定)不应该依赖于实现细节(变化) ，实现细节应该依赖于抽象(稳定)。(解析：这里的shape(抽象)值定义了接口，不依赖调其他用子类实现细节)
![](../pic/WeChat&#32;Image_20191024145445.png)